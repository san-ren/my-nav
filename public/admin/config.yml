backend:
  name: github
  repo: san-ren/my-nav
  branch: main

  commit_messages:
    create: 'åˆ›å»º {{collection}} â€œ{{slug}}â€'
    update: 'æ›´æ–° {{collection}} â€œ{{slug}}â€'
    delete: 'åˆ é™¤ {{collection}} â€œ{{slug}}â€'
    uploadMedia: 'ä¸Šä¼ èµ„æº â€œ{{path}}â€'
    deleteMedia: 'åˆ é™¤èµ„æº â€œ{{path}}â€'

locale: 'zh_Hans'
media_folder: "public/images"
public_folder: "/images"

slug:
  encoding: "unicode"     # âœ… å…è®¸ä¸­æ–‡æ–‡ä»¶å
  clean_accents: false    # âœ… ä¸è¦æ¸…æ´—å­—ç¬¦
  sanitize_replacement: "-"

collections:
  # ============================================================
  # 1. ç½‘ç«™å…¨å±€è®¾ç½®
  # ============================================================
  - name: "site_settings"
    label: "âš™ï¸ ç½‘ç«™åŸºç¡€é…ç½®"
    delete: false
    editor:
      preview: false
    files:
      - name: "config"
        label: "ç«™ç‚¹ä¿¡æ¯"
        file: "src/data/config.json"
        fields:
          - { label: "ç½‘ç«™æ ‡é¢˜", name: "title", widget: "string", required: false }
          - { label: "GitHub ç”¨æˆ·å", name: "githubUser", widget: "string", required: false }
          - { label: "GitHub ä»“åº“å", name: "githubRepo", widget: "string", required: false }
          - { label: "é¡µè„šä½œè€…å", name: "author", widget: "string", required: false }

  # ============================================================
  # 2. é¡µé¢å…ƒæ•°æ®ç®¡ç† (meta.json)
  # ============================================================
  - name: "nav_pages_meta"
    label: "ğŸ“„ é¡µé¢å±æ€§ç®¡ç†"
    folder: "src/data/nav"
    path: "{{id}}/meta"
    extension: "json"
    format: "json"
    create: true
    identifier_field: "name"
    summary: "é¡µé¢ï¼š{{name}} (ID: {{id}}) - æƒé‡ {{sortOrder}}"
    sortable_fields: ["sortOrder", "name"]
    editor:
      preview: true
      preview_url: "http://localhost:4321/my-nav/home" 
    fields:
      - { label: "é¡µé¢ID (æ–‡ä»¶å¤¹å)", name: "id", widget: "string", required: true, pattern: ['^[a-zA-Z0-9-_]+$', "åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿"], hint: "ä¾‹å¦‚ home, sub1" }
      - { label: "ä¾§è¾¹æ æ˜¾ç¤ºåç§°", name: "name", widget: "string", required: true }
      - { label: "ä¾§è¾¹æ å›¾æ ‡", name: "icon", widget: "string", required: false, hint: "Lucideå›¾æ ‡å" }
      - { label: "æ’åºæƒé‡", name: "sortOrder", widget: "number", default: 10, value_type: "int" }

  # ============================================================
  # 3. [è§†å›¾ A] åˆ†ç»„å†…å®¹ - å½’æ¡£è§†å›¾
  # ============================================================
  - name: "nav_groups"
    label: "ğŸ“¦ å†…å®¹åˆ†ç»„ (å½’æ¡£è§†å›¾)"
    folder: "src/data/nav"
    path: "{{page}}/groups/{{slug}}"
    
    # æ–‡ä»¶åè§„åˆ™ï¼š01_åç§°.json
    slug: "{{sort_prefix}}_{{name}}"
    
    media_folder: ""
    public_folder: ""
    extension: "json"
    format: "json"
    create: true
    identifier_field: "name"
    
    # âœ… å…è®¸æŒ‰â€œæ’åºç¼–å·â€æ’åº
    sortable_fields: ["sort_prefix", "name"]
    
    # âœ… åˆ—è¡¨æ‘˜è¦æ˜¾ç¤ºç¼–å·
    summary: "{{sort_prefix}} - {{name}}"
    
    view_groups:
      - label: "æŒ‰æ‰€å±é¡µé¢å½’æ¡£"
        field: "page"
        pattern: ".*"
    
    editor:
      preview: true
      preview_url: "http://localhost:4321/my-nav/home"

    fields:
      # --- 1. æ‰€å±é¡µé¢ (è‡ªåŠ¨å…³è”ä¸‹æ‹‰æ¡†) ---
      # âœ… 1. æ‰€å±é¡µé¢ID
      - label: "æ‰€å±é¡µé¢ID"
        name: "page"
        widget: "relation"
        collection: "nav_pages_meta"
        search_fields: ["id", "name"]
        value_field: "id"
        
        # ğŸ‘‡ ä¿®æ”¹è¿™é‡Œï¼šå»æ‰ "id"ï¼Œåªä¿ç•™ "sortOrder" å’Œ "name"
        # åˆ—è¡¨é‡Œæ˜¾ç¤ºï¼š "1 åŸºç¡€"
        # é¢„è§ˆé‡Œä¼šè‡ªåŠ¨è¡¥å…¨ä¸ºï¼š "1 åŸºç¡€ (home)" â€”â€” å®Œç¾ï¼
        display_fields: ["sortOrder", "name"]
        
        required: true
        hint: "ğŸ‘‡ å½’æ¡£ä½ç½® (æƒé‡ - åç§°)"

      # --- 2. æ’åºç¼–å· (ä¸‹æ‹‰æ¡†) ---
      - label: "ğŸ”¢ æ’åºç¼–å· (å†³å®šæ–‡ä»¶åé¡ºåº)"
        name: "sort_prefix"
        widget: "select"
        options: ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "20", "88", "99"]
        required: true
        default: "10"
        hint: "âš ï¸ å†³å®šåˆ†ç»„åœ¨ç½‘é¡µä¸­çš„å‰åé¡ºåº (01æ’æœ€å‰ï¼ŒåŒæ•°å­—æŒ‰åç§°æ’)"
      
      - { label: "åˆ†ç»„åç§° (é”šç‚¹)", name: "name", widget: "string", required: true }
      - { label: "åˆ†ç»„å›¾æ ‡", name: "icon", widget: "string", required: false }
      
      # --- 3. å†…éƒ¨åˆ†ç±» (é»˜è®¤æŠ˜å ) ---
      - label: "å†…éƒ¨åˆ†ç±»"
        name: "categories"
        widget: "list"
        collapsed: true  # âœ… é»˜è®¤æŠ˜å ï¼Œç•Œé¢æ›´æ¸…çˆ½
        summary: "ğŸ“‘ åˆ†ç±»ï¼š{{name}}"
        fields:
          - { label: "åˆ†ç±»åç§°", name: "name", widget: "string", required: true }
          - { label: "åˆ†ç±»å›¾æ ‡", name: "icon", widget: "string", required: false }

          # --- æ¨¡å¼ Aï¼šæ— Tabs (ç›´å±åˆ—è¡¨) ---
          - label: "ğŸ”— èµ„æºåˆ—è¡¨ (ç›´å±)"
            name: "list"
            widget: "list"
            required: false
            collapsed: true # âœ… é»˜è®¤æŠ˜å 
            summary: "{{name}}"
            fields:
              - { label: "åç§°", name: "name", widget: "string", required: true }
              - { label: "é“¾æ¥åœ°å€", name: "url", widget: "string", required: false }
              - { label: "å®˜ç½‘/é¡¹ç›®ä¸»é¡µ", name: "official_site", widget: "string", required: false }
              - label: "GitHub å¾½ç« "
                name: "badge_list"
                widget: "select"
                multiple: true
                required: false
                options: ["stars", "version", "last_commit", "license", "forks"]
              
              - { label: "ç®€çŸ­æè¿°", name: "desc", widget: "string", required: false }
              
              # âœ… å¢å¼º Markdown ç¼–è¾‘ä½“éªŒ
              - label: "è¯¦ç»†è¯´æ˜"
                name: "detail"
                widget: "markdown"
                required: false
                buttons: ["bold", "italic", "link", "code", "heading", "quote", "bulleted-list", "numbered-list", "image"]
                editor_components: ["image"]
              
              - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
              - { label: "è‡ªå®šä¹‰å›¾æ ‡ URL", name: "icon", widget: "image", required: false }
              - { label: "å°å·¥å…·è·¯å¾„", name: "widget_url", widget: "string", required: false }

          # --- æ¨¡å¼ Bï¼šæœ‰Tabs ---
          - label: "ğŸ—ƒï¸ æ ‡ç­¾é¡µ (Tabsæ¨¡å¼)"
            name: "tabs"
            widget: "list"
            required: false
            collapsed: true # âœ… é»˜è®¤æŠ˜å 
            summary: "Tabï¼š{{tabName}}" 
            fields:
              - { label: "é¡µç­¾åç§°", name: "tabName", widget: "string", required: true } 
              - label: "èµ„æºåˆ—è¡¨"
                name: "list"
                widget: "list"
                collapsed: true # âœ… é»˜è®¤æŠ˜å 
                required: false
                fields:
                  - { label: "åç§°", name: "name", widget: "string", required: true }
                  - { label: "é“¾æ¥åœ°å€", name: "url", widget: "string", required: false }
                  - { label: "å®˜ç½‘/é¡¹ç›®ä¸»é¡µ", name: "official_site", widget: "string", required: false }
                  - label: "GitHub å¾½ç« "
                    name: "badge_list"
                    widget: "select"
                    multiple: true
                    required: false
                    options: ["stars", "version", "last_commit", "license", "forks"]
                  
                  - { label: "ç®€çŸ­æè¿°", name: "desc", widget: "string", required: false }
                  
                  # âœ… å¢å¼º Markdown
                  - label: "è¯¦ç»†è¯´æ˜"
                    name: "detail"
                    widget: "markdown"
                    required: false
                    buttons: ["bold", "italic", "link", "code", "heading", "quote", "bulleted-list", "numbered-list", "image"]
                    editor_components: ["image"]
                    
                  - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
                  - { label: "è‡ªå®šä¹‰å›¾æ ‡ URL", name: "icon", widget: "image", required: false }
                  - { label: "å°å·¥å…·è·¯å¾„", name: "widget_url", widget: "string", required: false }

  # ============================================================
  # 4. [è§†å›¾ B] åˆ†ç»„å†…å®¹ - æ–‡ä»¶å¤¹è§†å›¾
  # ============================================================
  - name: "nav_structure"
    label: "ğŸ“‚ å†…å®¹åˆ†ç»„ (æ–‡ä»¶å¤¹è§†å›¾)"
    folder: "src/data/nav"
    nested:
      depth: 4
      summary: "{{name}}"
    media_folder: ""
    public_folder: ""
    extension: "json"
    format: "json"
    create: true
    identifier_field: "name"
    editor:
      preview: false
    filter:
      field: "page"
      pattern: ".+"
    fields:
      - { label: "æ‰€å±é¡µé¢ID", name: "page", widget: "string", required: false }
      - { label: "åˆ†ç»„åç§°", name: "name", widget: "string", required: true }
      - { label: "åˆ†ç»„å›¾æ ‡", name: "icon", widget: "string", required: false }
      
      - label: "å†…éƒ¨åˆ†ç±»"
        name: "categories"
        widget: "list"
        collapsed: true # âœ… é»˜è®¤æŠ˜å 
        summary: "ğŸ“‘ åˆ†ç±»ï¼š{{name}}"
        fields:
          - { label: "åˆ†ç±»åç§°", name: "name", widget: "string", required: true }
          - { label: "åˆ†ç±»å›¾æ ‡", name: "icon", widget: "string", required: false }

          # --- æ¨¡å¼ Aï¼šæ— Tabs ---
          - label: "ğŸ”— èµ„æºåˆ—è¡¨ (ç›´å±)"
            name: "list"
            widget: "list"
            required: false
            collapsed: true # âœ… é»˜è®¤æŠ˜å 
            summary: "{{name}}"
            fields:
              - { label: "åç§°", name: "name", widget: "string", required: true }
              - { label: "é“¾æ¥åœ°å€", name: "url", widget: "string", required: false }
              - { label: "å®˜ç½‘/é¡¹ç›®ä¸»é¡µ", name: "official_site", widget: "string", required: false }
              - label: "GitHub å¾½ç« "
                name: "badge_list"
                widget: "select"
                multiple: true
                required: false
                options: ["stars", "version", "last_commit", "license", "forks"]
              - { label: "ç®€çŸ­æè¿°", name: "desc", widget: "string", required: false }
              
              # âœ… å¢å¼º Markdown
              - label: "è¯¦ç»†è¯´æ˜"
                name: "detail"
                widget: "markdown"
                required: false
                buttons: ["bold", "italic", "link", "code", "heading", "quote", "bulleted-list", "numbered-list", "image"]
                editor_components: ["image"]
                
              - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
              - { label: "è‡ªå®šä¹‰å›¾æ ‡ URL", name: "icon", widget: "image", required: false }
              - { label: "å°å·¥å…·è·¯å¾„", name: "widget_url", widget: "string", required: false }

          # --- æ¨¡å¼ Bï¼šæœ‰Tabs ---
          - label: "ğŸ—ƒï¸ æ ‡ç­¾é¡µ (Tabsæ¨¡å¼)"
            name: "tabs"
            widget: "list"
            required: false
            collapsed: true # âœ… é»˜è®¤æŠ˜å 
            summary: "Tabï¼š{{tabName}}" 
            fields:
              - { label: "é¡µç­¾åç§°", name: "tabName", widget: "string", required: true } 
              - label: "èµ„æºåˆ—è¡¨"
                name: "list"
                widget: "list"
                collapsed: true # âœ… é»˜è®¤æŠ˜å 
                required: false
                fields:
                  - { label: "åç§°", name: "name", widget: "string", required: true }
                  - { label: "é“¾æ¥åœ°å€", name: "url", widget: "string", required: false }
                  - { label: "å®˜ç½‘/é¡¹ç›®ä¸»é¡µ", name: "official_site", widget: "string", required: false }
                  - label: "GitHub å¾½ç« "
                    name: "badge_list"
                    widget: "select"
                    multiple: true
                    required: false
                    options: ["stars", "version", "last_commit", "license", "forks"]
                  - { label: "ç®€çŸ­æè¿°", name: "desc", widget: "string", required: false }
                  
                  # âœ… å¢å¼º Markdown
                  - label: "è¯¦ç»†è¯´æ˜"
                    name: "detail"
                    widget: "markdown"
                    required: false
                    buttons: ["bold", "italic", "link", "code", "heading", "quote", "bulleted-list", "numbered-list", "image"]
                    editor_components: ["image"]
                    
                  - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
                  - { label: "è‡ªå®šä¹‰å›¾æ ‡ URL", name: "icon", widget: "image", required: false }
                  - { label: "å°å·¥å…·è·¯å¾„", name: "widget_url", widget: "string", required: false }

  # ============================================================
  # 5. æ•™ç¨‹æ–‡ç« ç®¡ç†
  # ============================================================
  - name: "guides"
    label: "ğŸ“š æ•™ç¨‹æ–‡ç« ç®¡ç†"
    folder: "src/content/guides"
    extension: "md"
    create: true
    slug: "{{slug}}"
    identifier_field: "title"
    summary: "{{title}} - {{date | date('YYYY-MM-DD')}}"
    editor:
      preview: true
      preview_url: "http://localhost:4321/my-nav/guide/"
    fields:
      - { label: "æ–‡ç« æ ‡é¢˜", name: "title", widget: "string", required: true }
      - { label: "å‘å¸ƒæ—¥æœŸ", name: "date", widget: "datetime", format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false, required: false }
      - { label: "æ–‡ç« å†…å®¹", name: "body", widget: "markdown", required: true }