

backend:
  name: github
  repo: san-ren/my-nav
  branch: main

  commit_messages:
    create: 'âœ¨ åˆ›å»º {{collection}} â€œ{{slug}}â€'
    update: 'ğŸ“ æ›´æ–° {{collection}} â€œ{{slug}}â€'
    delete: 'ğŸ—‘ï¸ åˆ é™¤ {{collection}} â€œ{{slug}}â€'
    uploadMedia: 'ğŸ–¼ï¸ ä¸Šä¼ èµ„æº â€œ{{path}}â€'
    deleteMedia: 'ğŸ”¥ åˆ é™¤èµ„æº â€œ{{path}}â€'

media_folder: "public/images"
public_folder: "/images"

slug:
  encoding: "unicode"
  clean_accents: false
  sanitize_replacement: "-"

collections:
  # ============================================================
  # 1. ç½‘ç«™å…¨å±€è®¾ç½®
  # ============================================================
  - name: "site_settings"
    label: "âš™ï¸ ç½‘ç«™é…ç½®"
    delete: false
    editor:
      preview: false
    files:
      - name: "config"
        label: "ç«™ç‚¹ä¿¡æ¯"
        file: "src/data/config.json"
        fields:
          - { label: "ç½‘ç«™æ ‡é¢˜", name: "title", widget: "string", required: false, hint: "æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µå’Œé¦–é¡µæ ‡é¢˜" }
          - { label: "é¡µè„šä½œè€…", name: "author", widget: "string", required: false }
          - { label: "GitHub ç”¨æˆ·å", name: "githubUser", widget: "string", required: false }
          - { label: "GitHub ä»“åº“å", name: "githubRepo", widget: "string", required: false }

  # ============================================================
  # 2. é¡µé¢å…ƒæ•°æ®ç®¡ç†
  # ============================================================
  - name: "nav_pages_meta"
    label: "ğŸ“„ é¡µé¢ç®¡ç† (Sidebar)"
    folder: "src/data/nav"
    path: "{{id}}/meta"
    extension: "json"
    format: "json"
    create: true
    identifier_field: "name"
    summary: "{{sortOrder}} - {{name}} (ID: {{id}})"
    sortable_fields: ["sortOrder", "name"]
    editor:
      preview: true
    fields:
      - { label: "é¡µé¢ID (æ–‡ä»¶å¤¹å)", name: "id", widget: "string", required: true, pattern: ['^[a-zA-Z0-9-_]+$', "åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿"], hint: "ä½œä¸ºURLçš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚: home, tools" }
      - { label: "æ˜¾ç¤ºåç§°", name: "name", widget: "string", required: true }
      - { label: "å›¾æ ‡ä»£ç ", name: "icon", widget: "string", required: false, hint: "Lucide å›¾æ ‡åç§°ï¼Œå¦‚: layout-grid" }
      - { label: "æ’åºæƒé‡", name: "sortOrder", widget: "number", default: 10, value_type: "int", hint: "æ•°å­—è¶Šå°è¶Šé å‰" }

  # ============================================================
  # 3. å†…å®¹åˆ†ç»„ - å½’æ¡£è§†å›¾
  # ============================================================
  - name: "nav_groups"
    label: "ğŸ“¦ å†…å®¹åˆ†ç»„ç®¡ç†"
    folder: "src/data/nav"
    path: "{{page}}/groups/{{slug}}"
    slug: "{{sort_prefix}}_{{name}}"
    media_folder: ""
    public_folder: ""
    extension: "json"
    format: "json"
    create: true
    identifier_field: "name"
    sortable_fields: ["sort_prefix", "name"]
    summary: "{{sort_prefix}} - {{name}}"
    
    view_groups:
      - label: "æŒ‰é¡µé¢å½’æ¡£"
        field: "page"
        pattern: ".*"
    
    editor:
      preview: true
      preview_url: "http://localhost:4321/my-nav/home"

    fields:
      # --- å¤´éƒ¨å…ƒæ•°æ® ---
      - label: "æ‰€å±é¡µé¢"
        name: "page"
        widget: "relation"
        collection: "nav_pages_meta"
        search_fields: ["id", "name"]
        value_field: "id"
        display_fields: ["sortOrder", "name"]
        required: true
        hint: "é€‰æ‹©è¯¥åˆ†ç»„å±äºå“ªä¸ªä¾§è¾¹æ é¡µé¢"

      - label: "æ’åºç¼–å·"
        name: "sort_prefix"
        widget: "select"
        options: ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "15", "20", "88", "99"]
        required: true
        default: "10"
        hint: "å†³å®šåˆ†ç»„åœ¨é¡µé¢ä¸­çš„å‚ç›´é¡ºåº (01æœ€é ä¸Š)"
      
      - { label: "åˆ†ç»„æ ‡é¢˜", name: "name", widget: "string", required: true }
      - { label: "åˆ†ç»„å›¾æ ‡", name: "icon", widget: "string", required: false, hint: "å¯é€‰ï¼Œç•™ç©ºåˆ™ä¸æ˜¾ç¤º" }
      
      # --- å†…éƒ¨åˆ†ç±» ---
      - label: "ğŸ“‘ åˆ†ç±»åˆ—è¡¨"
        name: "categories"
        widget: "list"
        collapsed: true 
        summary: "åˆ†ç±»ï¼š{{name}}"
        label_singular: "åˆ†ç±»"
        fields:
          - { label: "åˆ†ç±»åç§°", name: "name", widget: "string", required: true }
          - { label: "å›¾æ ‡", name: "icon", widget: "string", required: false }

          # --- èµ„æºåˆ—è¡¨ ---
          - label: "ğŸ”— èµ„æº/é“¾æ¥åˆ—è¡¨"
            name: "list"
            widget: "list"
            required: false
            collapsed: true
            summary: "{{name}}"
            label_singular: "èµ„æº"
            fields:
              - { label: "åç§°", name: "name", widget: "string", required: true }
              - { label: "Github é¡¹ç›®", name: "url", widget: "string", required: false }
              - { label: "å®˜ç½‘/ä¸»é¡µ", name: "official_site", widget: "string", required: false }
              - label: "å¾½ç« "
                name: "badge_list"
                widget: "select"
                multiple: true
                required: false
                options: ["stars", "version", "last_commit", "license", "forks"]
              
              - { label: ç®€è¦è¯´æ˜", name: "desc", widget: "string", required: false }
              
              - label: "è¯¦ç»†ä»‹ç» (Markdown)"
                name: "detail"
                widget: "markdown"
                required: false
                default: "- "
                default_mode: "rich_text"
                modes: ["rich_text", "raw"]
                buttons: 
                  - "bold"
                  - "italic"
                  - "link"
                  - "code"
                  - "quote"
                  - "bulleted-list"
                  - "numbered-list"
                  - "image"
                editor_components: ["image"]
              
              - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
              - { label: "è‡ªå®šä¹‰å›¾æ ‡", name: "icon", widget: "image", required: false }
              - { label: "Widget URL", name: "widget_url", widget: "string", required: false }

          # --- Tabs æ¨¡å¼ ---
          - label: "ğŸ—ƒï¸ å¤šæ ‡ç­¾é¡µå†…å®¹ (Tabs)"
            name: "tabs"
            widget: "list"
            required: false
            collapsed: true
            summary: "Tab: {{tabName}}" 
            fields:
              - { label: "æ ‡ç­¾é¡µåç§°", name: "tabName", widget: "string", required: true } 
              - label: "è¯¥æ ‡ç­¾ä¸‹çš„èµ„æº"
                name: "list"
                widget: "list"
                collapsed: true
                required: false
                fields:
                  - { label: "åç§°", name: "name", widget: "string", required: true }
                  - { label: "é“¾æ¥", name: "url", widget: "string", required: false }
                  - { label: "å®˜ç½‘", name: "official_site", widget: "string", required: false }
                  - label: "å¾½ç« "
                    name: "badge_list"
                    widget: "select"
                    multiple: true
                    required: false
                    options: ["stars", "version", "last_commit", "license", "forks"]
                  - { label: "æè¿°", name: "desc", widget: "string", required: false }
                  - label: "è¯¦ç»†ä»‹ç»"
                    name: "detail"
                    widget: "markdown"
                    required: false 
                    default: "- "
                    default_mode: "rich_text"
                    buttons: ["bold", "italic", "link", "bulleted-list", "numbered-list", "image"]
                  - { label: "å…³è”æ•™ç¨‹ID", name: "guide_id", widget: "string", required: false }
                  - { label: "è‡ªå®šä¹‰å›¾æ ‡ URL", name: "icon", widget: "image", required: false }
                  - { label: "å°å·¥å…·è·¯å¾„", name: "widget_url", widget: "string", required: false }

  # ============================================================
  # 4. æ•™ç¨‹æ–‡ç« 
  # ============================================================
  - name: "guides"
    label: "ğŸ“š æ•™ç¨‹æ–‡ç« "
    folder: "src/content/guides"
    extension: "md"
    create: true
    slug: "{{slug}}"
    identifier_field: "title"
    summary: "{{title}} ({{date | date('YYYY-MM-DD')}})"
    editor:
      preview: true
      preview_url: "http://localhost:4321/my-nav/guide/"
    fields:
      - { label: "æ–‡ç« æ ‡é¢˜", name: "title", widget: "string", required: true }
      - { label: "å‘å¸ƒæ—¥æœŸ", name: "date", widget: "datetime", format: "YYYY-MM-DD", date_format: "YYYY-MM-DD", time_format: false,required: false }
      - { label: "æ­£æ–‡å†…å®¹", name: "body", widget: "markdown", required: true }