---
import { Palette } from 'lucide-react';
---

<div class="relative group/theme z-50">
  <!-- 触发按钮 -->
  <button 
    class="p-2.5 bg-slate-100 dark:bg-gray-800 rounded-xl text-slate-500 hover:text-brand-600 transition-all flex items-center justify-center"
    title="切换主题"
  >
    <Palette size={20} />
  </button>

  <!-- 下拉菜单 (Hover 显示) -->
  <div class="absolute right-0 top-full mt-2 w-32 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-slate-100 dark:border-gray-700 opacity-0 invisible group-hover/theme:opacity-100 group-hover/theme:visible transition-all duration-200 transform origin-top-right">
    <div class="p-2 space-y-1">
      
      <!-- 蓝色 (默认) -->
      <button onclick="setTheme('default')" class="w-full flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-gray-700/50 transition-colors text-xs font-medium text-slate-600 dark:text-slate-300">
        <span class="w-4 h-4 rounded-full bg-blue-600 shadow-sm"></span>
        默认蓝
      </button>

      <!-- 紫色 -->
      <button onclick="setTheme('purple')" class="w-full flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-gray-700/50 transition-colors text-xs font-medium text-slate-600 dark:text-slate-300">
        <span class="w-4 h-4 rounded-full bg-purple-600 shadow-sm"></span>
        优雅紫
      </button>

      <!-- 绿色 -->
      <button onclick="setTheme('green')" class="w-full flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-gray-700/50 transition-colors text-xs font-medium text-slate-600 dark:text-slate-300">
        <span class="w-4 h-4 rounded-full bg-emerald-600 shadow-sm"></span>
        清新绿
      </button>

      <!-- 橙色 -->
      <button onclick="setTheme('orange')" class="w-full flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-gray-700/50 transition-colors text-xs font-medium text-slate-600 dark:text-slate-300">
        <span class="w-4 h-4 rounded-full bg-orange-500 shadow-sm"></span>
        活力橙
      </button>

    </div>
  </div>
</div>

<script is:inline>
  // 切换主题的函数（挂载到 window 以便 onclick 调用）
  window.setTheme = (themeName) => {
    const root = document.documentElement;
    if (themeName === 'default') {
      root.removeAttribute('data-theme');
      localStorage.removeItem('app-theme');
    } else {
      root.setAttribute('data-theme', themeName);
      localStorage.setItem('app-theme', themeName);
    }
  };
</script>